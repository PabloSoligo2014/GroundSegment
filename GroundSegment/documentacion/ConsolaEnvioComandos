"""
Consola shell de envio de comandos.
"""

cd C:\Users\pabli\git\GroundSegment\GroundSegment
python

cd /home/ubuntumate/git/GroundSegment/GroundSegment
python3.4

import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
import os; os.environ['DJANGO_SETTINGS_MODULE'] = 'GroundSegment.settings'; import django
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()
from GroundSegment.models.Satellite import Satellite
from datetime import datetime, timedelta
#proj_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
#print(proj_path)
os.system('cls' if os.name=='nt' else 'clear')


from GroundSegment.models.Satellite import SatelliteTlmyCmdProcessor.py" "TTC" "FS2017"
fs2017 = Satellite.objects.get(code="FS2017")
fs2017.getCommandType()
ct = fs2017.getCommandType().get(code="telemetryOBC")

cmd = fs2017.newCommand(ct, datetime.utcnow()+timedelta(minutes=5))
fs2017.sendCommand(cmd)

from GroundSegment.models.TlmyVar import TlmyVar
from django.db.models import Q

tmps = TlmyVar.objects.filter(tlmyVarType__code="obcT1").filter(tlmyVarType__satellite=fs2017).order_by('-created')[:5].values_list('calFValue', flat=True)
med = np.average(tmps)
if med>27:
	ct = fs2017.getCommandType().get(code="telemetryOBC")
	md = fs2017.newCommand(ct, datetime.utcnow()+timedelta(minutes=5))
	fs2017.sendCommand(cmd)
	
	
